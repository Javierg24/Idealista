<div class="header">
  <div class="container-menu">
    <div class="logo">
      <img src="../../assets/img/idealista.svg" alt="logo-idealista" routerLink="/inicio"/>
    </div>
  </div>
</div>

<div class="crear-anuncio">
  <h2>Poner tu anuncio de particular</h2>

  <!-- Secci√≥n de informaci√≥n √∫til -->
  <div class="info-util">
    <h3>Informaci√≥n √∫til</h3>
    <p> Ten las fotos listas. Sin fotos, tu anuncio tendr√° menos impacto.</p>
    <p> Los dos primeros anuncios son gratis. Publica pisos, chalets, locales y m√°s.</p>
    <p> Publica hasta 5 habitaciones gratis en piso compartido.</p>
    <p> Se cobrar√°n tarifas para ciertos tipos de anuncios.</p>
    
    <ul>
      <li>Anunciantes con m√°s de dos inmuebles</li>
      <li>Anuncios duplicados</li>
      <li>Inmuebles en venta de m√°s de 1.000.000 ‚Ç¨</li>
      <li>Inmuebles en alquiler de m√°s de 2.500 ‚Ç¨/mes</li>
    </ul>

    <div class="info-links">
      <p>‚ö° <a href="#">Encuentra la agencia inmobiliaria adecuada</a></p>
      <p>üè¢ <a href="#">Conoce nuestras ventajas para profesionales</a></p>
    </div>
  </div>

  <form [formGroup]="anuncioForm" (ngSubmit)="onSubmit()">
    
    <!-- Tipo de propiedad -->
    <div class="form-group">
      <label>Elige el tipo de inmueble</label>
      <select formControlName="tipo">
        <option value="casa">Casa</option>
        <option value="piso">Piso</option>
        <option value="oficina">Oficina</option>
        <option value="local">Local Comercial</option>
      </select>
    </div>

    <!-- Tipo de operaci√≥n (Radio Buttons) -->
    <div class="form-group">
      <label>Operaci√≥n</label>
      <div class="radio-group">
        <label *ngFor="let tipo of tipoOpciones">
          <input type="radio" formControlName="tipoOperacion" [value]="tipo" /> {{ tipo }}
        </label>
      </div>
    </div>

    <!-- Campos generales -->
    <div class="form-group">
      <label>T√≠tulo del anuncio</label>
      <input type="text" formControlName="titulo" required />
    </div>

    <div class="form-group">
      <label>Descripci√≥n</label>
      <textarea formControlName="descripcion" required></textarea>
    </div>

    <div class="form-group">
      <label>Precio (‚Ç¨)</label>
      <input type="number" formControlName="precio" required />
    </div>

    <div class="form-group">
      <label>Provincia</label>
      <select formControlName="id_provincia">
        <option *ngFor="let provincia of provincias$ | async" [value]="provincia.id_provincia">
          {{ provincia.nombre }}
        </option>
      </select>
    </div>

    <div class="form-group">
      <label>Localidad</label>
      <select formControlName="id_localidad">
        <option *ngFor="let localidad of localidades$ | async" [value]="localidad.id_localidad">
          {{ localidad.nombre }}
        </option>
      </select>
    </div>

    <div class="form-group">
      <label>Ubicaci√≥n exacta</label>
      <input type="text" formControlName="ubicacion" required />
    </div>

    <div class="form-group">
      <label>Tama√±o (m¬≤)</label>
      <input type="number" formControlName="tamanio" required />
    </div>

    <!-- Campos din√°micos seg√∫n tipo de propiedad -->
    <div *ngIf="tipoPropiedad === 'casa' || tipoPropiedad === 'piso'">
      <div class="form-group">
        <label>Habitaciones</label>
        <input type="number" formControlName="n_habitaciones" />
      </div>
      <div class="form-group">
        <label>Ba√±os</label>
        <input type="number" formControlName="n_banios" />
      </div>
    </div>

    <div *ngIf="tipoPropiedad === 'casa'">
      <div class="form-group">
        <label><input type="checkbox" formControlName="jardin" /> ¬øTiene jard√≠n?</label>
      </div>
      <div class="form-group">
        <label><input type="checkbox" formControlName="piscina" /> ¬øTiene piscina?</label>
      </div>
    </div>

    <button type="submit" class="btn-primary" [disabled]="anuncioForm.invalid || loading">
      {{ loading ? 'Publicando...' : 'Publicar Anuncio' }}
    </button>

    <div class="mensaje-exito" *ngIf="mensajeExito">
      {{ mensajeExito }}
    </div>
    
  </form>
</div>
